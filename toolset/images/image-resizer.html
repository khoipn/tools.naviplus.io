---
layout: default
title: "Batch Image Resizer"
description: "Resize images with center crop, preview thumbnails, and download individually or as ZIP."
---

<div class="container py-4">
  <!-- Header -->
  <div class="row mb-3">
    <div class="col-12">
      <h1 class="h3 mb-1">Batch Image Resizer</h1>
      <p class="text-muted mb-0">Resize images with center crop. Preview thumbnails and download results individually or as a ZIP.</p>
    </div>
  </div>

  <!-- Card: Upload -->
  <div class="card mb-3">
    <div class="card-header"><strong>Upload Images</strong></div>
    <div class="card-body">
      <div id="dropzone" class="border border-2 border-primary-subtle rounded-3 p-4 text-center bg-light mb-3">
        <p class="mb-2"><strong>Drop images here</strong> or</p>
        <button id="selectBtn" class="btn btn-primary" type="button">Select files</button>
        <input id="fileInput" type="file" accept="image/*" multiple class="d-none" />
        <p class="small text-muted mb-0">Supports JPG, PNG, WebP, GIF. Files are processed locally on your device.</p>
      </div>

      <!-- Selected Files -->
      <div class="mb-3">
        <label class="form-label">Selected files</label>
        <div id="fileList" class="row g-2 small"></div>
      </div>

      <!-- Resize Options -->
      <div class="mb-3">
        <label class="form-label">Target ratio</label>
        <select id="ratioSelect" class="form-select">
          <option value="4:3">4:3</option>
          <option value="16:9">16:9</option>
          <option value="3:2">3:2</option>
          <option value="1:1">1:1</option>
          <option value="3:4">3:4</option>
          <option value="9:16">9:16</option>
          <option value="2:3">2:3</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="resizeLevel" class="form-label">Resize level (max dimension px)</label>
        <input type="range" id="resizeLevel" min="200" max="2000" step="50" value="800" class="form-range" />
        <div class="form-text">Current: <span id="resizeVal">800</span>px</div>
      </div>

      <div class="d-flex gap-2 flex-wrap">
        <button id="processBtn" class="btn btn-success" disabled>Resize Images</button>
        <button id="clearBtn" class="btn btn-outline-secondary">Clear</button>
        <button id="zipBtn" class="btn btn-outline-primary" disabled>Download ZIP</button>
      </div>
    </div>
  </div>

  <!-- Card: Results -->
  <div class="card mb-3">
    <div class="card-header"><strong>Resized Previews</strong></div>
    <div class="card-body">
      <div id="gallery" class="row g-3"></div>
    </div>
  </div>

  <div class="alert alert-secondary small">
    <strong>Tip:</strong> Images are resized with center crop into the chosen ratio and max dimension. Output is JPEG at quality 0.75.
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

<script>
(() => {
  const $ = (s,r=document) => r.querySelector(s);
  const dropzone = $('#dropzone');
  const selectBtn = $('#selectBtn');
  const fileInput = $('#fileInput');
  const processBtn = $('#processBtn');
  const clearBtn = $('#clearBtn');
  const zipBtn = $('#zipBtn');
  const gallery = $('#gallery');
  const fileList = $('#fileList');
  const resizeLevel = $('#resizeLevel');
  const resizeVal = $('#resizeVal');
  const ratioSelect = $('#ratioSelect');

  let files = [];
  let results = [];

  function renderFileList(){
    fileList.innerHTML='';
    files.forEach(f => {
      const col = document.createElement('div');
      col.className='col-6 col-md-3';
      const url = URL.createObjectURL(f);
      col.innerHTML = `<div class="border rounded-3 p-1 text-center">
        <img src="${url}" class="img-fluid mb-1" alt="thumb">
        <div class="text-truncate">${f.name}</div>
      </div>`;
      fileList.appendChild(col);
    });
  }

  function addFiles(newFiles){
    files = files.concat(Array.from(newFiles));
    renderFileList();
    processBtn.disabled = files.length===0;
  }

  clearBtn.addEventListener('click', ()=>{
    files=[]; results=[]; gallery.innerHTML=''; fileList.innerHTML='';
    processBtn.disabled = true; zipBtn.disabled = true;
  });

  // Drag & drop
  ['dragenter','dragover','dragleave','drop'].forEach(evt => {
    document.addEventListener(evt, e => { e.preventDefault(); e.stopPropagation(); }, false);
  });
  dropzone.addEventListener('drop', e => addFiles(e.dataTransfer.files));
  selectBtn.addEventListener('click', () => fileInput.click());
  fileInput.addEventListener('change', e => { addFiles(e.target.files); fileInput.value=''; });

  resizeLevel.addEventListener('input', ()=>{ resizeVal.textContent=resizeLevel.value; });

  function cropFit(img, maxDim, ratio){
    let [rw,rh] = ratio.split(':').map(Number);
    const targetW = maxDim;
    const targetH = Math.round(maxDim * rh/rw);
    const canvas = document.createElement('canvas');
    canvas.width = targetW; canvas.height = targetH;
    const ctx = canvas.getContext('2d');
    const r = Math.max(targetW/img.width, targetH/img.height);
    const nw = img.width*r, nh = img.height*r;
    const ox = (targetW-nw)/2, oy = (targetH-nh)/2;
    ctx.drawImage(img, ox, oy, nw, nh);
    return canvas;
  }

  async function process(){
    gallery.innerHTML=''; results=[];
    const ratio = ratioSelect.value;
    const maxDim = +resizeLevel.value;
    for(const file of files){
      const img = await loadImage(file);
      const canvas = cropFit(img,maxDim,ratio);
      const blob = await new Promise(r=>canvas.toBlob(r,'image/jpeg',0.75));
      const url = URL.createObjectURL(blob);
      results.push({name: file.name.replace(/\.[^.]+$/, '')+`_${maxDim}_${ratio.replace(':','-')}.jpg`, blob});
      const col = document.createElement('div');
      col.className='col-6 col-md-3';
      col.innerHTML = `<div class="border rounded-3 p-1 text-center">
        <img src="${url}" class="img-fluid mb-1" alt="thumb">
        <a class="btn btn-sm btn-outline-success" href="${url}" download>Download</a>
      </div>`;
      gallery.appendChild(col);
    }
    zipBtn.disabled = results.length===0;
  }

  function loadImage(file){
    return new Promise((res,rej)=>{
      const img = new Image();
      img.onload=()=>res(img);
      img.onerror=rej;
      img.src=URL.createObjectURL(file);
    });
  }

  processBtn.addEventListener('click', process);

  zipBtn.addEventListener('click', async ()=>{
    if(!results.length) return;
    zipBtn.disabled = true; zipBtn.textContent='Zipping...';
    const zip = new JSZip();
    results.forEach(r=>zip.file(r.name,r.blob));
    const blob = await zip.generateAsync({type:'blob'});
    const url = URL.createObjectURL(blob);
    const a=document.createElement('a'); a.href=url; a.download='resized_images.zip';
    document.body.appendChild(a); a.click(); a.remove();
    setTimeout(()=>URL.revokeObjectURL(url),4000);
    zipBtn.disabled = false; zipBtn.textContent='Download ZIP';
  });
})();
</script>